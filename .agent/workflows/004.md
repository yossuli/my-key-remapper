---
description: Leaf コンポーネントでの Props 分割代入 (Late Destructuring)
---

# [Fix-004] Leaf コンポーネントでの Props 分割代入 (Late Destructuring)

## 概要

Props Grouping (Late Destructuring) ルールの適用漏れを修正する。
Leaf コンポーネント（末端）において、グループ化された Props オブジェクトを引数で直接受け取り、コンポーネント定義の冒頭で分割代入を行う形式にリファクタリングする。

## 目的

- **可読性向上**: コンポーネントが具体的にどのデータや関数（アクション）に依存しているかを、定義の冒頭で一目で把握できるようにする。
- **依存関係の明示**: `props.group.action` のような深いネストでの使用を避け、使用する要素を明確にする。

## 適用条件

以下の条件を満たすコンポーネントに適用する:

1.  親からグループ化された Props (例: `layerActions`, `keyState` など) を受け取っている。
2.  その Props をさらに子コンポーネントにパススルー**していない**（Leaf コンポーネントである）。
3.  現在、実装内で `props.group.value` や `group.value` のようにドット記法でアクセスしている。

## 手順

1.  **コンポーネント定義の引数を変更**:

    - Props オブジェクトを受け取る箇所で、対象のグループ化された Prop を分割代入の形に書き換える。
    - _Before_: `function Component({ group }: Props)`
    - _After_: `function Component({ group: { val1, func1 } }: Props)`

2.  **実装内の参照を更新**:

    - `group.val1` や `group.func1()` となっている箇所を、`val1` や `func1()` に置換する。

3.  **確認**:
    - リファクタリング前後で動作が変わっていないことを論理的に確認する（単純な置換であるため）。
    - 型エラーが出ていないことを確認する。

## 例 (Before/After)

### Before

```tsx
function MousePositionInput({ mouseHandlers }: Props) {
  return (
    <button onClick={mouseHandlers.onGetPosition}>{mouseHandlers.x}</button>
  );
}
```

### After

```tsx
function MousePositionInput({ mouseHandlers: { onGetPosition, x } }: Props) {
  return <button onClick={onGetPosition}>{x}</button>;
}
```
