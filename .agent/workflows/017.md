---
description: 型定義の移動・整理
---

# [Workflow-017] 型定義の移動・整理 (Refactor Type Location)

## 概要

散乱した型定義や、依存関係が不適切な型定義を整理・移動する手順です。循環参照を防ぎ、再利用性を高めます。

## 配置ルール

- **`src/shared/types/`**: フロントエンド・バックエンド共通で使用する型（Config, IPC メッセージ等）。
- **`src/renderer/src/types/`**: フロントエンド全体で使う型。
- **コンポーネントファイル内**: そのコンポーネントでしか使わない Props や State 型 (`Workflow-001` 推奨)。

## 手順 (Step-by-Step)

### 1. 移動計画

- 移動元の型と、移動先のファイルを決定します。
- 循環参照が発生しないか依存関係を確認します（Shared から Renderer への依存は NG）。

### 2. ファイル移動・転記

- 型定義を移動します。`git mv` が使える場合はファイルごと移動、部分移動の場合はカット＆ペーストします。

### 3. インポートパスの修正

- **禁止事項**: `sed` や `awk` 等のコマンドラインツールを使用した一括置換は行わないでください（文字コード問題回避のため）。
- **推奨手順**:
  - エディタの機能でリネームが可能ならそれを使用します。
  - 私（AI）が修正を提案する場合は、**置換用の正規表現 (Regular Expression)** を提示し、ユーザーにエディタの検索・置換機能での実行を依頼します。
  - 例: `from "(\.\./)+shared/types/(.+)"` -> `from "@/shared/types/$2"`

### 4. コンフリクト解消

- コンポーネント内の Props 定義など、ローカルで済むものは `export` せずファイル内に閉じ込めます。

## チェックリスト

- [ ] `shared` への移動時、フロントエンド固有の型（React など）が含まれていないか確認したか？
- [ ] 全ての参照箇所を更新したか？
- [ ] 循環参照エラーが出ていないか？
