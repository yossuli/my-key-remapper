---
description: Workflows・ルールの最適化手順
---

# [Workflow-028] Workflows・ルールの最適化手順 (Refine Workflows & Rules)

## 概要

このワークフローは、プロジェクトのルール（`GEMINI.md`, `RULE.md`）やワークフロー（`.agent/workflows/*.md`）を自律的に改善・整理するための標準手順です。
「AI にとっての使いやすさ」と「人間（ユーザー）にとっての透明性」を両立させることを目的とします。

## 適用条件 (Trigger)

- AI（自分）が「このルールは使いにくい/古い/矛盾している」と感じたとき。
- ユーザーから「ワークフローを整理してほしい」という依頼があったとき。
- 新しい共通パターンが見つかり、既存のワークフローを大幅に書き換える必要があるとき。

## 手順 (Step-by-Step)

### 1. 現状分析と課題の抽出

- 既存の `GEMINI.md` および `.agent/workflows/` ディレクトリ内のファイルを精査する。
- 以下の観点で課題をリストアップする：
  - **情報の重複**: 同じようなルールが複数の場所にないか？
  - **矛盾**: 一方のワークフローが他方の指示を妨げていないか？
  - **古さ**: 現在のコードベースやライブラリ構成と合わなくなっていないか？
  - **実効性**: そのルールは実際に守られているか？（例：守られていないログ運用など）

### 2. 変更・新設・削除計画の提示

- `implementation_plan.md` にて、具体的にどのファイルをどう変更するかを提示し、ユーザーの承認（y）を得る。
- **削除** を行う場合は、その機能がどこに統合されたかを明記する。

### 3. ドラフト作成と相互参照の修正

- 直接 `.agent/workflows/` のファイルを編集せず、まず `_drafts/` ディレクトリで変更・新規ファイルを作成する ([Workflow-023] 準拠)。
- ファイル間のリンク（`Workflow-XXX` 等の記述）に不整合が出ないよう、全体をチェックする。

### 4. ログへの詳細記録

- なぜその変更を行ったのか、その結果 AI の動作がどう改善されると期待しているかを `log.md` に記録する。

### 5. ステージングと反映

- ユーザーにドラフトを提示し、承認を得てから `/workflows/` へ反映（移動・上書き）する。

## チェックリスト

- [ ] 変更案は `implementation_plan.md` で承認されたか？
- [ ] 関連するすべてのワークフローから古い参照を削除/更新したか？
- [ ] 変更の根拠と意図が `log.md` に記載されているか？
- [ ] 「AI にとっても使いやすい（迷わない、自動化しやすい）」形になっているか？

## 知見の継続的改善 (Continuous Knowledge Improvement)

このワークフロー自体も改善の対象です。より効率的な整理手順が見つかった場合は、本ドキュメントを更新してください。
