---
description: リスト項目のクリック領域確保とボタンネスト回避のパターン
---

# [Workflow-037] リスト項目のクリック領域確保とボタンネスト回避 (Clickable Area Maximization)

## 概要

リストアイテムにおいて、複数の要素（編集ボタン、リンク等）を含みつつ、行全体のクリック領域を最大化するためのパターンです。`<button>` の中に `<button>` を置く構造違反を避けながら、リスト内の「デッドゾーン（クリックしても反応しない領域）」を排除することを目的とします。

## 原則 (Core Principle)

- **デッドゾーンの排除**: リストアイテム内のあらゆる余白は、何らかのアクション（主に編集）に割り当て、ユーザーが「どこをクリックしても反応する」状態を維持します。
- **構造の正当性**: インタラクティブな要素はすべて兄弟要素として配置し、ネストを避けます。

## Bad / Good Example

### Bad Example (NG)

- **ボタンのネスト**:

  ```tsx
  <button onClick={onEdit}>
    <span>ラベル</span>
    <button onClick={onNavigate}>マクロ名</button> {/* NG: ボタンの入れ子 */}
  </button>
  ```

- **クリック領域の欠落**:
  ```tsx
  <div className="flex">
    <button onClick={onEdit}>編集</button>
    <button onClick={onNavigate}>マクロ名</button>
    <div className="flex-1" /> {/* NG: ここをクリックしても反応しない */}
  </div>
  ```

### Good Example (OK)

- **兄弟要素としてのボタン配置と領域確保**:
  ```tsx
  <div className="flex items-center">
    <Button onClick={onMainAction} data-action="main">
      ラベル
    </Button>
    <Button onClick={onSubAction}>サブ機能</Button>
    {/* flex-1 の透明ボタンで残りの余白を埋めてデッドゾーンを解消 */}
    <Button
      className="flex-1 h-auto justify-start"
      data-action="main"
      onClick={onMainAction}
      variant="ghost"
      aria-label="メイン動作を実行"
    />
  </div>
  ```

## Step-by-Step (実装手順)

1.  **ラッパーの選択**: インタラクティブなラッパー要素を避け、静的なコンテナ（`div` 等）を選択します。
2.  **要素の分解**: 行内の機能を「メインの動作（行全体の役割）」と「サブの動作（特定のボタン等）」に分解し、すべて兄弟要素として配置します。
3.  **メイン動作の領域確保**:
    - メインの動作を担当する要素（または余白埋め用の透明な要素）で残りのスペースをすべて占有させます。
    - これにより、行内のどこをクリックしてもメインの動作が発火するようにします。
4.  **精密な状態制御**:
    - 親要素において、メインの動作を担当する要素の状態を検知してスタイルを適用します。
    - これにより、サブの動作を担当する要素にホバーした際などは、意図的に行全体のハイライトを抑制する等の精密な制御が可能になります。

## チェックリスト

- [ ] ボタンのネストを避け、すべての動作が兄弟要素として配置されているか？
- [ ] メインの動作が、行内のすべての余白領域をカバーしているか？
- [ ] サブの動作が、メインの動作を妨げずに独立して機能するか？
- [ ] サブの動作の状態に応じて、行全体の視覚的フィードバック（ハイライト等）が適切に制御されているか？

## 知見の種 (Seed) の記録

運用を通じて得られた「コーディングパターンの改善案」や「ルールの例外事例」は、`seeds.md` (Working Dir) へ記録してください（[Workflow-seed] 準拠）。

## 知見の継続的改善

新しい UI コンポーネントや CSS 機能（Subgrid 等）の導入により、より簡潔な実装が可能になった場合は、本ワークフローを更新してください。
