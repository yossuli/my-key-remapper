---
description: UIコンポーネントの使用ルール (No Direct UI Imports)
---

# [Fix-030] UI コンポーネントの直接インポート禁止 (No Direct UI Imports)

## 概要

一貫したデザインと振る舞いを保証するため、`src/renderer/src/components/ui` (`shadcn/ui` primitives) からの直接インポートを禁止し、プロジェクト固有の `atoms` または `template` コンポーネントを使用することを強制します。

## 背景 (Rationale)

- **Atomic Design 違反**: `organisms` や `molecules` が `ui` (Raw Primitive) に直接依存すると、層の責務が曖昧になる。
- **一貫性の欠如**: 個々の場所で `AlertDialog` や `Button` を生で使うと、スタイルや挙動の統一が困難になる。
- **変更コスト**: 将来的に UI ライブラリを差し替える際、全ファイルを修正する必要が出る。

## ルール (Rules)

### 1. `components/ui` の使用禁止

`components/ui` 配下のコンポーネントを、`components/atoms/**` 以外からインポートしてはならない。

#### Bad Example

```tsx
// ❌ organisms から直接 ui をインポート
import { Button } from "@/components/ui/button";
import { AlertDialog } from "@/components/ui/alert-dialog";
```

#### Good Example

```tsx
// ⭕ atoms や templates でラップされたものを使用
import { Button } from "@/components/atoms/Button";
import { ConfirmDialog } from "@/components/molecules/ConfirmDialog"; // (または atoms)
import { ModalLayout } from "@/components/template/ModalLayout";
```

### 2. ラッパーの作成推奨

必要な UI コンポーネントが `atoms` にない場合は、生で使用するのではなく、まず `atoms` にラッパーを作成する。

## 手順 (Step-by-Step)

1. **違反の発見**: `import ... from "@/components/ui/..."` を見つけた場合。
2. **代替コンポーネントの確認**: `src/renderer/src/components/atoms` または `molecules`、`template` に代替がないか確認する。
   - `Dialog`, `AlertDialog` -> `ModalLayout`, `ConfirmDialog`
   - `Button` -> `atoms/Button`
   - `Input` -> `atoms/Input`
3. **新規作成**: 代替がない場合、`atoms` に薄いラッパーを作成する。
4. **置き換え**: 該当箇所のインポートを修正する。

## チェックリスト

- [ ] `components/ui` からのインポートが `atoms` 以外に残っていないか？
- [ ] 新規作成したラッパーが必要十分な Props を公開しているか？
- [ ] プロジェクト標準の `ModalLayout` 等を優先して使用したか？

## 知見の継続的改善 (Continuous Knowledge Improvement)

このワークフローを使用する中で、新しい指示や改善点が見つかった場合は、必ずこのファイル (`.agent/workflows/030.md`) を更新・改善することを提案してください。
